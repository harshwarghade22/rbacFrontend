<div class="page-wrapper">
  <div class="form-container">

    <!-- Left: Decorative Panel -->
    <div class="side-panel">
      <div class="side-content">
        <div class="side-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" />
            <circle cx="8.5" cy="7" r="4" />
            <line x1="20" y1="8" x2="20" y2="14" />
            <line x1="23" y1="11" x2="17" y2="11" />
          </svg>
        </div>
        <h2 class="side-title">Add New Member</h2>
        <p class="side-description">
          Create a new user or administrator account with specific
          role-based access to the system.
        </p>

        <div class="side-features">
          <div class="feature-item">
            <div class="feature-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />
              </svg>
            </div>
            <div>
              <span class="feature-title">Role-Based Access</span>
              <span class="feature-desc">Assign specific permissions</span>
            </div>
          </div>

          <div class="feature-item">
            <div class="feature-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="11" width="18" height="11" rx="2" ry="2" />
                <path d="M7 11V7a5 5 0 0 1 10 0v4" />
              </svg>
            </div>
            <div>
              <span class="feature-title">Secure Credentials</span>
              <span class="feature-desc">Encrypted password storage</span>
            </div>
          </div>

          <div class="feature-item">
            <div class="feature-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" />
                <polyline points="22 4 12 14.01 9 11.01" />
              </svg>
            </div>
            <div>
              <span class="feature-title">Instant Activation</span>
              <span class="feature-desc">Account ready immediately</span>
            </div>
          </div>
        </div>
      </div>




    </div>

    <!-- Right: Form Panel -->
    <div class="form-panel">
      <!-- Form Header -->
      <div class="form-header">
        <div class="form-header-top">
          <h1 class="form-title">Create Account</h1>
          <span class="form-badge" [class.admin-badge]="role === 'ROLE_ADMIN'">
            <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
              <path *ngIf="role === 'ROLE_ADMIN'"
                d="M12 2L15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2z" />
              <path *ngIf="role !== 'ROLE_ADMIN'" d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
              <circle *ngIf="role !== 'ROLE_ADMIN'" cx="12" cy="7" r="4" />
            </svg>
            {{ role === 'ROLE_ADMIN' ? 'Admin' : 'User' }}
          </span>
        </div>
        <p class="form-subtitle">Fill in the details below to register a new account</p>
      </div>

      <!-- Success Alert -->
      <div class="alert success-alert" *ngIf="successMessage">
        <div class="alert-icon success">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" />
            <polyline points="22 4 12 14.01 9 11.01" />
          </svg>
        </div>
        <div class="alert-content">
          <span class="alert-title">Success!</span>
          <span class="alert-message">{{ successMessage }}</span>
        </div>
        <button class="alert-close" (click)="successMessage = ''">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18" />
            <line x1="6" y1="6" x2="18" y2="18" />
          </svg>
        </button>
      </div>

      <!-- Error Alert -->
      <div class="alert error-alert" *ngIf="errorMessage">
        <div class="alert-icon error">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10" />
            <line x1="15" y1="9" x2="9" y2="15" />
            <line x1="9" y1="9" x2="15" y2="15" />
          </svg>
        </div>
        <div class="alert-content">
          <span class="alert-title">Error</span>
          <span class="alert-message">{{ errorMessage }}</span>
        </div>
        <button class="alert-close" (click)="errorMessage = ''">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18" />
            <line x1="6" y1="6" x2="18" y2="18" />
          </svg>
        </button>
      </div>

      <!-- Form -->
      <form (ngSubmit)="createUser()" #userForm="ngForm">

        <!-- Name Field -->
        <div class="form-group">
          <label class="form-label" for="name">
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
              <circle cx="12" cy="7" r="4" />
            </svg>
            Full Name
          </label>
          <div class="input-wrapper" [class.focused]="nameFocused" [class.has-value]="name.length > 0"
            [class.invalid]="nameField.invalid && nameField.touched">
            <input type="text" id="name" [(ngModel)]="name" name="name" #nameField="ngModel" required minlength="2"
              placeholder="Enter full name" (focus)="nameFocused = true" (blur)="nameFocused = false"
              autocomplete="name" />
          </div>
          <div class="field-error" *ngIf="nameField.invalid && nameField.touched">
            <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10" />
              <line x1="12" y1="8" x2="12" y2="12" />
              <line x1="12" y1="16" x2="12.01" y2="16" />
            </svg>
            <span *ngIf="nameField.errors?.['required']">Name is required</span>
            <span *ngIf="nameField.errors?.['minlength']">Name must be at least 2 characters</span>
          </div>
        </div>

        <!-- Email Field -->
        <div class="form-group">
          <label class="form-label" for="email">
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" />
              <polyline points="22,6 12,13 2,6" />
            </svg>
            Email Address
          </label>
          <div class="input-wrapper" [class.focused]="emailFocused" [class.has-value]="email.length > 0"
            [class.invalid]="emailField.invalid && emailField.touched">
            <input type="email" id="email" [(ngModel)]="email" name="email" #emailField="ngModel" required email
              placeholder="Enter email address" (focus)="emailFocused = true" (blur)="emailFocused = false"
              autocomplete="email" />
          </div>
          <div class="field-error" *ngIf="emailField.invalid && emailField.touched">
            <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10" />
              <line x1="12" y1="8" x2="12" y2="12" />
              <line x1="12" y1="16" x2="12.01" y2="16" />
            </svg>
            <span *ngIf="emailField.errors?.['required']">Email is required</span>
            <span *ngIf="emailField.errors?.['email']">Enter a valid email address</span>
          </div>
        </div>

        <!-- Password Field -->
        <div class="form-group">
          <label class="form-label" for="password">
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="11" width="18" height="11" rx="2" ry="2" />
              <path d="M7 11V7a5 5 0 0 1 10 0v4" />
            </svg>
            Password
          </label>
          <div class="input-wrapper password-wrapper" [class.focused]="passwordFocused"
            [class.has-value]="password.length > 0" [class.invalid]="passwordField.invalid && passwordField.touched">
            <input [type]="showPassword ? 'text' : 'password'" id="password" [(ngModel)]="password" name="password"
              #passwordField="ngModel" required minlength="6" placeholder="Enter password"
              (focus)="passwordFocused = true" (blur)="passwordFocused = false" autocomplete="new-password" />
            <button type="button" class="toggle-password" (click)="showPassword = !showPassword" tabindex="-1">
              <svg *ngIf="!showPassword" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" />
                <circle cx="12" cy="12" r="3" />
              </svg>
              <svg *ngIf="showPassword" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path
                  d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24" />
                <line x1="1" y1="1" x2="23" y2="23" />
              </svg>
            </button>
          </div>
          <!-- Password Strength -->
          <div class="password-strength" *ngIf="password.length > 0">
            <div class="strength-bars">
              <div class="strength-bar" [class.active]="password.length >= 1"
                [class.weak]="getPasswordStrength() === 'weak'" [class.medium]="getPasswordStrength() === 'medium'"
                [class.strong]="getPasswordStrength() === 'strong'"></div>
              <div class="strength-bar" [class.active]="password.length >= 4"
                [class.weak]="getPasswordStrength() === 'weak' && password.length >= 4"
                [class.medium]="getPasswordStrength() === 'medium'" [class.strong]="getPasswordStrength() === 'strong'">
              </div>
              <div class="strength-bar" [class.active]="password.length >= 8"
                [class.weak]="getPasswordStrength() === 'weak' && password.length >= 8"
                [class.medium]="getPasswordStrength() === 'medium' && password.length >= 8"
                [class.strong]="getPasswordStrength() === 'strong'"></div>
            </div>
          </div>
          <div class="field-error" *ngIf="passwordField.invalid && passwordField.touched">
            <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10" />
              <line x1="12" y1="8" x2="12" y2="12" />
              <line x1="12" y1="16" x2="12.01" y2="16" />
            </svg>
            <span *ngIf="passwordField.errors?.['required']">Password is required</span>
            <span *ngIf="passwordField.errors?.['minlength']">Password must be at least 6 characters</span>
          </div>
        </div>

        <!-- Role Selector -->
        <div class="form-group">
          <label class="form-label">
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />
            </svg>
            Account Role
          </label>
          <div class="role-selector">
            <div class="role-option" [class.selected]="role === 'ROLE_USER'" (click)="role = 'ROLE_USER'">
              <div class="role-radio">
                <div class="radio-dot" *ngIf="role === 'ROLE_USER'"></div>
              </div>
              <div class="role-icon user-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                  stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
                  <circle cx="12" cy="7" r="4" />
                </svg>
              </div>
              <div class="role-details">
                <span class="role-name">User</span>
                <span class="role-desc">Standard access with limited permissions</span>
              </div>
            </div>

            <div class="role-option" [class.selected]="role === 'ROLE_ADMIN'" (click)="role = 'ROLE_ADMIN'">
              <div class="role-radio admin-radio">
                <div class="radio-dot" *ngIf="role === 'ROLE_ADMIN'"></div>
              </div>
              <div class="role-icon admin-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                  stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <polygon
                    points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" />
                </svg>
              </div>
              <div class="role-details">
                <span class="role-name">Administrator</span>
                <span class="role-desc">Full system access and management rights</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Admin Warning -->
        <div class="admin-warning" *ngIf="role === 'ROLE_ADMIN'">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z" />
            <line x1="12" y1="9" x2="12" y2="13" />
            <line x1="12" y1="17" x2="12.01" y2="17" />
          </svg>
          <span>Admin accounts have elevated privileges. Assign this role carefully.</span>
        </div>

        <!-- Submit Button -->
        <button type="submit" class="submit-btn" [disabled]="loading || userForm.invalid" [class.loading]="loading">
          <div class="btn-content">
            <svg *ngIf="!loading" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
              fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" />
              <circle cx="8.5" cy="7" r="4" />
              <line x1="20" y1="8" x2="20" y2="14" />
              <line x1="23" y1="11" x2="17" y2="11" />
            </svg>
            <div class="btn-spinner" *ngIf="loading"></div>
            {{ loading ? 'Creating Account...' : 'Create Account' }}
          </div>
        </button>

      </form>
    </div>
  </div>
</div>